<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Learn Plover Lessons</title>
	<link href="style.css" rel="stylesheet" type="text/css">
	<script src="type-jig.js"></script>
	<script src="util.js"></script>
	<script src="word-drill.js"></script>
	<script src="steno-display.js"></script>
	<script src="learn-plover.js"></script>
	<script src="plover-translations.js"></script>
	<link rel="stylesheet" type="text/css" href="font-roboto.css">
</head>
<body>

<div class="wrapper">
	<div id="form">
		<h1>Learn Plover Exercises</h1>
		<div class="form-section"><form id="selectDrill">
			<ul style="list-style-type: none">
				<li><select name="drill"></select></li>
				<li><label><input name="hints" type="checkbox" value="yes" checked> Show hints?</label></li>
				<li><label><input id="randomly" name="type" type="radio" value="randomly"> Randomly</label> for <input name="timeLimit" type="text" size="2", value="10" oninput="selectRandomly()"> minutes.</li>
				<li><label><input id="ordered" name="type" type="radio" value="once" checked> Once in order.</label></li>
				<li><label><input id="shuffled" name="type" type="radio" value="shuffled"> Once in random order.</label></li>
				<li><input type="submit" value="Go"></li>
			</ul>
		</div>
	</div>
</div>

<div id="lesson" class="wrapper" style="display: none">
	<h3 id="lesson-name" class="center"></h3>
	<div>
		<div id="answer"></div>
		<div id="exercise"></div>
	</div>

	<div id="nav">
		<p id="clock" class="clock"></p>

		<p class="center"><a id="back">&larr; Back to Menu</a></p>
		<p class="center"><a id="again">&#8634; Restart</a></p>
	</div>

	<p id="error-log"></p>
	<textarea id="input"></textarea>
</div>

<script>
window.onload = function() {
	if(document.location.search === '') {
		var form = document.getElementById('selectDrill');
		var drill = form.elements.drill;
		var order = TypeJig.WordSets.LearnPloverOrder;
		for(var i=0; i<order.length; ++i) {
			var option = document.createElement('option');
			option.appendChild(document.createTextNode(order[i]));
			drill.appendChild(option);
		}
		drill.focus();
	} else {
		var fields = parseQueryString(document.location.search);
		TypeJig.WordSets = TypeJig.WordSets.LearnPlover;
		var exercise = wordDrill(fields);
		if(exercise) {
			if(fields.hints) {
				var translations = TypeJig.shortestTranslations(TypeJig.Translations.Plover);
				var hints = new StenoDisplay('strokes', translations, true);
			}

			displayOnly('lesson');
			var jig = setExercise(exercise.name, exercise, hints);
		}
	}
}

function displayOnly(show) {
	var i, tabs
	tabs = ['form', 'lesson']
	for (i in tabs) {
		document.getElementById(tabs[i]).style.display = tabs[i] === show ? 'block' : 'none'
	}
}
</script>
</body>
</html>
